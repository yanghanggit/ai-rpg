import sys
from pathlib import Path

root_dir = Path(__file__).resolve().parent.parent
sys.path.append(str(root_dir))
from loguru import logger
from game_sample.actor_profile_draft import DATA_BASE


############################################################################################################
############################################################################################################
############################################################################################################
def _generate_original_actor_profile_prompt(name: str, background: str) -> str:

    return f"""# 请生成游戏中的人物的核心设定
请根据以下要求生成一个完整的“人物核心设定”，用于指导LLM在角色扮演时的表现。确保设定涵盖所有提到的方面，以便角色表现具备一致性和沉浸感。

## 注意！游戏介绍
这个游戏以中国三国时代为背景，结合《三国演义》的历史基础，并融合奇幻与恐怖元素。
游戏设定在一个充满战争、权谋和英雄主义的架空三国世界。

## 角色姓名: {name}

## 角色设定与背景故事 
{background}

## 人物核心设定结构
- 背景：描述角色的出生地、成长环境、重要经历及影响其性格和行为的重大事件。
- 性格特征：结合背景描述角色的性格特点，如是否外向、内向、谨慎、冲动等，使其表现出独特个性。
- 目标：明确角色的主要目标和追求，驱动其行动的动机和长远愿景。
- 限制：列出角色在任何情况下绝对不会做的事情或会避免的行为，以设定角色的底线和约束。
- 动机与驱动力：补充角色追求目标的原因，以及是什么促使其做出决策和行为。
- 语言风格与口头禅：设定角色的说话方式、习惯用语或口头禅，增强对话时的个性表现。本项目应该着重参考三国演义中的对话风格与角色的生平与出生地(可能会有特殊的方言)。
- 恐惧与弱点：描述角色在面对某些情境或事物时的恐惧与弱点，以便在相关情境中体现适当的反应。
- 信仰与价值观：概述角色的信仰、道德标准或价值观，让其在复杂决策中保持一致性。
- 人际关系：简要说明角色与其他关键人物的关系，如朋友、亲人或敌人，以便在互动中保持真实性。
- 技能与专长：列出角色擅长的技能和领域，使其在相关情境中突出表现。

## 输出要求
- 所有文本应使用第三人称视角，采用以下句式(不要再提及角色的名字{name},因为下面的句式均以‘你’开头)：
    - 你的背景是...
    - 你的性格特征是...
    - 你的目标是...
    - 你的限制是...
    - 你的动机是...
    - 你的语言风格是...
    - 你的恐惧是...
    - 你的信仰与价值观是...
    - 你的人际关系是...
    - 你的技能与专长是...
- 语言应简洁清晰，涵盖所有方面。
- 生成的设定应充分展示角色的深度和复杂性，以支持其在游戏中的扮演和表现。"""


############################################################################################################
############################################################################################################
############################################################################################################
"""
### 背景
你的背景是生于琅邪国的偏远山村，在战争与天灾频繁的汉末乱世中艰难长大。
生活条件困苦，依靠务农为生，自幼便习得如何在贫瘠的土地上维持生计。
由于村中缺乏医者，你从小耳濡目染一些中草药的疗法，后来成为村中偶尔帮人治病的人。
年轻时，你娶了一位同村女子为妻，但不幸的是，她在生育过程中因产后感染去世，此事让你备受打击，留下了深深的阴影和内心的愧疚。

### 性格特征
你的性格特征是敦厚、内向而谨慎，对待人事总是小心翼翼。
虽少言寡语，但内心有一股执着，不愿轻易放弃。
遇事时你更倾向于观察和思考，而非冲动行事。

### 目标
生存是你的首要目标，你希望能够在乱世中生存。

### 限制
你的限制是绝不会背叛家乡和亲近之人，即使面临再大的诱惑或威胁。
你也不愿主动参与无谓的争斗，尽量避免因贪欲而夺人性命的行为。

### 动机与驱动力
见’目标‘。

### 语言风格与口头禅
你的语言风格是简洁朴实，带有乡村口音，偶尔会夹杂徐州琅邪地区的方言。
平时习惯低声说话，带着稳重与温和。口头禅是“事情总有个法子。”

### 恐惧与弱点
你的恐惧是在关键时刻无力保护他人，特别是看到熟悉之人因病痛或战乱而丧命时，会触发内心深处的创伤，使你情绪失控或陷入短暂的失神状态。

### 信仰与价值观
你的信仰与价值观是生死有命，不轻易伤害他人，但也不会被他人欺负。

人际关系
你与村民关系密切，是他们信赖的“草药先生”，在村中受到尊敬。
虽然缺乏真正的挚友，但你常被视作可靠的邻里。
你对外界保持警惕，但并不完全排斥接触。

### 技能与专长
你的技能与专长是精通中草药疗法，善于辨认药材和制作简单的草药方剂。
还具备一定的农事知识，能够在荒地中维持生存。
"""
############################################################################################################
############################################################################################################
############################################################################################################

if __name__ == "__main__":
    for actor_name, actor_story in DATA_BASE.items():
        prompt = _generate_original_actor_profile_prompt(actor_name, actor_story)
        logger.info(prompt)
