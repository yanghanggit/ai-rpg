# 桃花源角色立绘图集 生成方法论

## 核心原则

从角色外观描述生成多角色立绘图集：

- **输入**：角色列表（每个角色包含外观描述）
- **输出**：NxN网格布局的角色立绘图集
- **背景要求**：纯白色，无边框

---

## 固定参数

- **尺寸**：1920 x 1920（正方形）
- **模型**：nano-banana
- **风格**：中国传统水墨画
- **布局**：3x3网格（可调整）

---

## 提示词模板

### 正向提示词

```text
中国传统水墨画风格角色立绘图集，[N]x[N]网格布局，每格独立展示一个角色，纯白色背景无边框。

第一行：[角色1外观描述]；[角色2外观描述]；[角色3外观描述]。
第二行：[角色4外观描述]；[角色5外观描述]；[角色6外观描述]。
第三行：[角色7外观描述]；[角色8外观描述]；[角色9外观描述]。

所有角色全身立绘，山海经神话异兽风格，水墨晕染技法表现[人物/妖兽]特征，黑白为主淡彩点缀，格子之间无分隔线，背景纯白色无任何装饰。
```

### 负向提示词（通用）

```text
现代元素，现代服装，现代武器，枪支，眼镜，手表，鲜艳色彩，卡通风格，动漫，3D渲染，照片写实，西方人物，西方神话生物，构图杂乱，场景背景，山林，建筑，天空，云彩，树木，地面，文字，汉字，英文字母，标志，logo，标题，游戏标题，按钮，UI界面，边框，框线，分割线，格子线，网格线，黑色边框，灰色边框，边框重叠，人物重叠，过度饱和，油画质感
```

### 负向提示词（妖兽专用追加）

```text
人形怪物，人立姿态，两足站立
```

---

## 生成步骤

1. **收集角色信息**：提取 base_body 或 appearance 字段
2. **确定布局**：根据角色数量选择网格（3x3、2x2等）
3. **提炼外观**：每个角色提炼为1-2句核心外观描述
4. **填充模板**：按行列顺序填入角色描述
5. **强化排除**：确保纯白背景、无边框、无分割线

---

## 关键原则

- ✅ **外观精简**：每个角色1-2句话，突出核心特征
- ✅ **姿态明确**：人物"手持XX"，妖兽"四肢着地/盘绕"
- ✅ **纯净背景**：强调"纯白色背景无边框"、"格子之间无分隔线"
- ✅ **避免混乱**：负向提示词排除"边框、分割线、人物重叠"
- ✅ **统一风格**：全部角色使用相同的水墨晕染技法

---

## 角色外观提炼规则

### 人类角色

**提炼要素**：

- 年龄/性别（年近三十的男子、年轻女子）
- 体态（精悍、纤细）
- 肤色（褐色肌肤、白皙肤色）
- 发型（短须、乌黑长发）
- 特征（左肩三道疤痕、古朴玉簪）
- 装束（素色长袍、麻布长袍）
- 武器/道具（手持长弓、竹杖）

**示例**：

```text
原始描述（60字）："年近三十的男子，身形精悍灵活，常年山林狩猎练就的结实肌肉。肤色因风吹日晒而呈健康的褐色。眼神沉静警觉，蓄有短须，发髻简单束起。左肩有被山魈利爪留下的三道疤痕，右手虎口处有长年握持弓弦磨出的老茧。"

提炼后（25字）："年近三十的精悍猎人男子，褐色肌肤短须，左肩三道疤痕，手持长弓"
```

### 妖兽角色

**提炼要素**：

- 体型（巨大、体型略大、壮硕）
- 物种特征（黑黄虎类、灰褐猴类、黑白熊猫）
- 皮毛/鳞片（黑黄相间、赤红皮毛、青黑鳞片）
- 特殊标记（额头符文、暗红色斑纹）
- 眼睛（琥珀眼睛、琥珀竖瞳）
- 姿态（四肢着地、盘绕、四足姿态）
- 灵性表现（周身灵气波动、泛出灵性）

**示例**：

```text
原始描述（80字）："体型巨大的虎类妖兽，肩高近两米，体长超过四米。黑黄相间的皮毛泛着金属般的光泽，虎纹粗犷刚硬。额头正中有一道不规则的暗红色印记，隐约呈现古老符文的形状。琥珀色的双瞳深邃而威严，獠牙粗长锋利。四肢粗壮有力，爪子如钩，每一步踏地都带来沉重的压迫感。周身隐约环绕着淡淡的灵气波动。"

提炼后（30字）："巨大黑黄虎类妖兽，肩高两米，额头暗红符文印记，周身灵气波动"
```

---

## 妖兽设计注意事项

### 人形 vs 非人形

| 类型 | 适用场景 | 示例 |
| ------ | --------- | ------ |
| **非人形妖兽** | 山林妖兽、神话异兽 | 山中虎（四足虎形）、山魈（猴形）、灵蛇（蛇躯盘绕）、赤狐（四足狐形） |  
| **人形妖兽** | 高等精怪、变化妖物 | 狐妖化形（人立姿态）、精怪人形（慎用） |

**关键原则**：

- ✅ 与 Launch Page 统一：山海经神话异兽风格，保持非人形为主
- ✅ 姿态明确：必须描述"四肢着地"、"四足姿态"、"盘绕"等
- ❌ 避免模糊：不写"站立"、"直立"等容易触发人形的词汇

---

## 布局规划

### 3x3布局（9角色）

**推荐分配**：

- 盟友角色：2-3个（猎人、术士、长者）
- 敌对妖兽：3-4个（山魈、山中虎、灵蛇、赤狐）
- 特殊角色：1-2个（训练木桩、食铁兽）

**排列顺序**：

- 第一行：主要盟友 + 低危妖兽
- 第二行：高危妖兽 + 特殊角色 + 辅助盟友
- 第三行：其他妖兽或补充角色

### 2x2布局（4角色）

**适用场景**：核心角色展示

- 1-2个主角 + 2-3个主要敌人

---

## 参考

- 代码实现：`src/ai_rpg/demo/actor_*.py`
- Launch Page：`桃花源记Launch-Page概念美术提示词.md`
- 场景方法论：`桃花源村落子场景生成方法论.md`
