# 多智能体游戏框架改进清单

## 📋 待改进问题

### 1. 环境交互系统问题

#### 1.1 交互逻辑不合理
- **问题描述**：角色无法智能地利用可交互物体，某些交互行为显得不符合逻辑
- **具体表现**：部分交互操作缺乏合理性，影响游戏体验

#### 1.2 强制交互行为
- **问题描述**：角色会强制与环境物体交互，不符合角色特性
- **举例说明**：战士角色没有远程攻击能力，却能凭空触发摇摇欲坠的石头掉落
- **影响范围**：破坏了角色职业特色的一致性

#### 1.3 交互状态重复
- **问题描述**：已交互过的物体会重复出现交互选项
- **当前状态**：经过修改后有所改善，但仍需进一步优化

#### 1.4 抽卡系统职业适配性
- **问题描述**：虽然可以针对不同职业设置抽卡偏好，但限制过于简单
- **待解决**：如何让角色根据自身特点和环境状况选择合适的抽卡策略

### 2. 角色技能系统问题

#### 2.1 角色混乱问题
- **问题描述**：出现角色身份混乱，抽取技能与角色不匹配的情况
- **重要发现**：抽卡提示词直接限制角色抽卡模式会导致角色混乱

#### 2.2 环境交互技能生成异常
- **问题描述**：抽卡提示词可能强制让不具备环境交互能力的角色生成环境交互技能
- **需要改进**：优化提示词逻辑，确保技能生成符合角色定位

#### 2.3 演出效果优化需求
- **改进方向**：修改演出提示词，增强技能与环境交互的视觉效果

## 🔍 有趣发现

### 3. 系统自我保护机制
- **现象**：可以设置角色不生成任何技能，但会导致后续错误
- **案例分析**：训练机器人时出现的bug（生成战士和法师技能）源于系统的自我保护机制
- **推测**：当设置"不生成技能"时，系统为避免崩溃会强制生成技能

### 4. 技能质量递减现象
- **观察结果**：第一回合生成的技能通常非常合理
- **问题趋势**：随着回合推进，技能生成质量逐渐下降
- **需要研究**：找出质量递减的根本原因

## 💡 创新设想

### 5. 环境感知战斗系统
- **核心理念**：战斗前进行环境观察和分析
- **实现流程**：
  1. 战斗开始前扫描可交互环境元素
  2. 玩家选择交互方式：
     - 直接与环境元素交互
     - 使用技能配合环境元素交互
  3. 执行交互判定和效果计算

## 📊 优先级排序

| 优先级 | 问题类别 | 影响程度 | 实现难度 |
|--------|----------|----------|----------|
| 🔴 高 | 角色混乱问题 | 严重 | 中等 |
| 🟡 中 | 强制交互行为 | 中等 | 较低 |
| 🟡 中 | 技能质量递减 | 中等 | 较高 |
| 🟢 低 | 演出效果优化 | 较低 | 较低 |

## 📝 后续计划

1. **短期目标**：解决角色混乱和强制交互问题
2. **中期目标**：实现环境感知战斗系统原型
3. **长期目标**：建立完整的智能交互生态系统