# 角色提示词优化方法论

## 设计原则

1. **简洁化标题** - 依赖LLM理解力，而非冗长指导
2. **结构化信息** - 清晰的标签和层次
3. **去除冗余** - 保留核心，删除重复和过度阐述
4. **分离关注点** - 历史/目标/性格/外观各司其职

---

## 角色设定（actor_profile）结构

### **历史**

- **定义**: 游戏启动前的角色生平
- **内容**: 过去身份 + 重大事件 + 经历影响
- **格式**: 自然段叙述
- **长度**: 2-3句话，聚焦核心经历

### **性格**

- **定义**: 角色的核心性格特质
- **内容**: 主要性格特点 + 行为风格来源
- **格式**: "你性格XXX，XXX，XXX"
- **长度**: 1-2句话

### **禁忌**

- **定义**: 角色绝对不能接受的事物（情感极值）
- **内容**: 深恶痛绝的事物、行为或力量
- **格式**: "你深恶痛绝XXX"
- **长度**: 1句话

### **最爱**

- **定义**: 角色最倾向的事物（情感极值）
- **内容**: 最喜欢的具象化事物
- **格式**: "你最爱XXX"
- **长度**: 1句话

---

## 外观设定（appearance）结构

### 必备要素（按顺序）

1. **基础信息**: 年龄 + 种族 + 性别 + 体型
2. **外貌细节**: 肤色 + 面容 + 发型
3. **装备描述**: 主要装备列举
4. **特殊特征**: 疤痕、标志等醒目特点

### 格式要求

- **单一自然段叙述**
- **按"整体→局部"顺序**
- **包含视觉关键词**（颜色、材质、状态）
- **无姿态描述**
- **无风格标签**

---

## 目标设定（kick_off_message）

### 位置

- **不在** `actor_profile` 中
- **在** `world.py` 的 `kick_off_message` 中动态添加

### 原则

- 只保留**表面目标**，不要"真实使命"或"隐藏动机"
- 简洁直接，单一主线
- 格式: "你的目标: XXX"

---

## 优化前后对比

### 原版问题

- 历史/目标/动机混杂
- 过度阐述价值观和行为准则
- 外观描述叙述化，不利于文生图
- 信息密度低，冗余多

### 优化版特点

- **历史**单独成段，聚焦过去
- **目标**移至kick_off_message
- **禁忌/最爱**作为情感极值点
- **性格**精简为核心特质
- **外观**包含完整的视觉信息（种族/年龄/体型/装备/特征）

---

## 执行步骤

1. **梳理原始内容** - 区分历史/目标/性格/外观
2. **提取核心信息** - 删除冗余和重复
3. **重新组织结构** - 按标签化重构
4. **统一叙述风格** - 所有段落以"你"开头
5. **验证完整性** - 确保关键信息不丢失

---

## 适用范围

此方法论适用于所有NPC角色的提示词优化，确保：

- 信息精简高效
- LLM易于理解
- 保持沉浸感
- 支持文生图扩展
